generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "postgresql"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

model User {
  id                             String                 @id @default(uuid())
  email                          String                 @unique
  password                       String
  role                           UserRole               @default(INDIVIDUAL)
  status                         UserStatus             @default(PENDING_VERIFICATION)
  isEmailVerified                Boolean                @default(false) @map("is_email_verified")
  firstName                      String?                @map("first_name")
  lastName                       String?                @map("last_name")
  phone                          String?
  profileImage                   String?                @map("profile_image")
  failedLoginAttempts            Int                    @default(0) @map("failed_login_attempts")
  accountLockedUntil             DateTime?              @map("account_locked_until")
  lastFailedLoginAt              DateTime?              @map("last_failed_login_at")
  createdAt                      DateTime               @default(now()) @map("created_at")
  updatedAt                      DateTime               @updatedAt @map("updated_at")
  lastLoginAt                    DateTime?              @map("last_login_at")
  applicationUpdates             Boolean                @default(true) @map("application_updates")
  emailNotifications             Boolean                @default(true) @map("email_notifications")
  jobAlerts                      Boolean                @default(true) @map("job_alerts")
  kycUpdates                     Boolean                @default(true) @map("kyc_updates")
  profileVisibility              String                 @default("public") @map("profile_visibility")
  pushNotifications              Boolean                @default(true) @map("push_notifications")
  showEmail                      Boolean                @default(false) @map("show_email")
  showPhone                      Boolean                @default(false) @map("show_phone")
  // Urgent Job Notification Preferences
  urgentJobNotificationsEnabled  Boolean                @default(true) @map("urgent_job_notifications_enabled")
  urgentJobMaxDistance           Float?                 @map("urgent_job_max_distance") // in km, null = use default 10km
  urgentJobMinPayment            Decimal?               @map("urgent_job_min_payment") @db.Decimal(10, 2)
  urgentJobPreferredCategories   Json?                  @map("urgent_job_preferred_categories") // Array of UrgentJobCategory
  urgentJobQuietHoursStart       String?                @map("urgent_job_quiet_hours_start") // e.g., "22:00"
  urgentJobQuietHoursEnd         String?                @map("urgent_job_quiet_hours_end") // e.g., "08:00"
  urgentJobNotificationFrequency String                 @default("instant") @map("urgent_job_notification_frequency") // "instant" | "digest"
  individualKYC                  IndividualKYC?
  industrialKYC                  IndustrialKYC?
  otps                           OTP[]
  refreshTokens                  RefreshToken[]
  // trainingComments               TrainingComment[]
  notifications                  Notification[]
  feedback                       Feedback[]
  // urgentJobsPosted               UrgentJob[]            @relation("UrgentJobPoster")
  // urgentJobApplications          UrgentJobApplication[] @relation("UrgentJobApplicant")

  @@index([email])
  @@index([status])
  @@map("users")
}

model OTP {
  id        String   @id @default(uuid())
  userId    String   @map("user_id")
  email     String
  code      String   @db.VarChar(6)
  type      String
  expiresAt DateTime @map("expires_at")
  isUsed    Boolean  @default(false) @map("is_used")
  createdAt DateTime @default(now()) @map("created_at")
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([email, code])
  @@index([userId])
  @@map("otps")
}

model RefreshToken {
  id        String    @id @default(uuid())
  userId    String    @map("user_id")
  token     String    @unique
  expiresAt DateTime  @map("expires_at")
  isRevoked Boolean   @default(false) @map("is_revoked")
  createdAt DateTime  @default(now()) @map("created_at")
  revokedAt DateTime? @map("revoked_at")
  user      User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([token])
  @@map("refresh_tokens")
}

model IndividualKYC {
  id                     String               @id @default(uuid())
  userId                 String               @unique @map("user_id")
  fullName               String               @map("full_name")
  gender                 String
  pronouns               String?
  dateOfBirth            DateTime             @map("date_of_birth")
  nationalId             String               @map("national_id")
  passportNumber         String?              @map("passport_number")
  country                String               @default("Nepal")
  province               String
  district               String
  municipality           String
  ward                   String
  street                 String?
  city                   String?
  email                  String
  phone                  String
  emergencyContact       String?              @map("emergency_contact")
  profilePhotoUrl        String?              @map("profile_photo_url")
  videoKYCUrl            String?              @map("video_kyc_url")
  highestQualification   String               @map("highest_qualification")
  fieldOfStudy           String               @map("field_of_study")
  schoolUniversity       String?              @map("school_university")
  languagesKnown         Json                 @map("languages_known")
  externalCertifications Json?                @map("external_certifications")
  employmentStatus       String               @map("employment_status")
  experience             Json?
  expectedSalaryMin      Int?                 @map("expected_salary_min")
  expectedSalaryMax      Int?                 @map("expected_salary_max")
  willingRelocate        Boolean              @default(false) @map("willing_relocate")
  technicalSkills        Json?                @map("technical_skills")
  softSkills             Json?                @map("soft_skills")
  physicalSkills         Json?                @map("physical_skills")
  interestDomains        Json?                @map("interest_domains")
  workStylePrefs         Json?                @map("work_style_prefs")
  psychometricData       Json?                @map("psychometric_data")
  motivationTriggers     Json?                @map("motivation_triggers")
  learningPrefs          Json?                @map("learning_prefs")
  trainingWillingness    Int?                 @map("training_willingness")
  availableHoursWeek     Int?                 @map("available_hours_week")
  careerGoals            String?              @map("career_goals")
  areasImprovement       Json?                @map("areas_improvement")
  digitalLiteracy        String?              @map("digital_literacy")
  preferredIndustry      String?              @map("preferred_industry")
  references             Json?
  portfolioUrls          Json?                @map("portfolio_urls")
  videoIntroUrl          String?              @map("video_intro_url")
  socialMediaUrls        Json?                @map("social_media_urls")
  talentConfidenceScore  Float?               @map("talent_confidence_score")
  careerFitScore         Float?               @map("career_fit_score")
  readinessScore         Float?               @map("readiness_score")
  status                 KYCStatus            @default(PENDING)
  submittedAt            DateTime             @default(now()) @map("submitted_at")
  verifiedAt             DateTime?            @map("verified_at")
  verifiedBy             String?              @map("verified_by")
  rejectionReason        String?              @map("rejection_reason")
  adminNotes             String?              @map("admin_notes")
  consentGiven           Boolean              @default(false) @map("consent_given")
  consentDate            DateTime?            @map("consent_date")
  createdAt              DateTime             @default(now()) @map("created_at")
  updatedAt              DateTime             @updatedAt @map("updated_at")
  latitude               Float?               @map("latitude")
  longitude              Float?               @map("longitude")
  employmentHistory      EmploymentHistory[]
  user                   User                 @relation(fields: [userId], references: [id], onDelete: Cascade)
  jobApplications        JobApplication[]
  serviceBookings        ServiceBooking[]
  serviceReviews         ServiceReview[]
  serviceReports         ServiceReport[]
  serviceDemands         ServiceDemand[]

  @@index([userId])
  @@index([status])
  @@index([province])
  @@index([district])
  @@index([email])
  @@map("individual_kyc")
}

model IndustrialKYC {
  id                       String       @id @default(uuid())
  userId                   String       @unique @map("user_id")
  companyName              String       @map("company_name")
  companyEmail             String       @map("company_email")
  companyPhone             String       @map("company_phone")
  registrationNumber       String?      @map("registration_number")
  yearsInBusiness          Int?         @map("years_in_business")
  companySize              String?      @map("company_size")
  industrySector           String?      @map("industry_sector")
  registrationCertificate  String       @map("registration_certificate")
  taxClearanceCertificate  String       @map("tax_clearance_certificate")
  panCertificate           String       @map("pan_certificate")
  vatCertificate           String?      @map("vat_certificate")
  country                  String       @default("Nepal")
  province                 String
  district                 String
  municipality             String
  ward                     String
  street                   String?
  contactPersonName        String?      @map("contact_person_name")
  contactPersonDesignation String?      @map("contact_person_designation")
  contactPersonPhone       String?      @map("contact_person_phone")
  status                   KYCStatus    @default(PENDING)
  submittedAt              DateTime     @default(now()) @map("submitted_at")
  verifiedAt               DateTime?    @map("verified_at")
  verifiedBy               String?      @map("verified_by")
  rejectionReason          String?      @map("rejection_reason")
  adminNotes               String?      @map("admin_notes")
  createdAt                DateTime     @default(now()) @map("created_at")
  updatedAt                DateTime     @updatedAt @map("updated_at")
  user                     User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  jobPostings              JobPosting[]
  services            Service[]
  demandResponses     ServiceDemandResponse[]

  @@index([userId])
  @@index([status])
  @@index([province])
  @@index([district])
  @@map("industrial_kyc")
}
model ServiceCategory {
  id          String    @id @default(uuid())
  name        String    @unique
  description String?
  icon        String?
  order       Int       @default(0)
  isActive    Boolean   @default(true) @map("is_active")
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime  @updatedAt @map("updated_at")
  
  subcategories ServiceSubcategory[]
  services      Service[]
  trendingServices TrendingService[]
  demands       ServiceDemand[]

  @@index([isActive])
  @@map("service_categories")
}

model ServiceSubcategory {
  id          String          @id @default(uuid())
  categoryId  String          @map("category_id")
  name        String
  description String?
  isActive    Boolean         @default(true) @map("is_active")
  createdAt   DateTime        @default(now()) @map("created_at")
  updatedAt   DateTime        @updatedAt @map("updated_at")
  
  category    ServiceCategory @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  services    Service[]
  demands     ServiceDemand[]

  @@unique([categoryId, name])
  @@index([categoryId])
  @@map("service_subcategories")
}

model Service {
  id                  String             @id @default(uuid())
  providerId          String             @map("provider_id")
  categoryId          String             @map("category_id")
  subcategoryId       String?            @map("subcategory_id")
  title               String
  description         String             @db.Text
  detailedDescription String?            @map("detailed_description") @db.Text
  specifications      Json?
  standards           Json?
  demographics        Json?
  geographics         Json?
  
  priceType           PriceType          @map("price_type")
  priceMin            Decimal?           @map("price_min") @db.Decimal(10, 2)
  priceMax            Decimal?           @map("price_max") @db.Decimal(10, 2)
  hourlyRate          Decimal?           @map("hourly_rate") @db.Decimal(10, 2)
  dailyRate           Decimal?           @map("daily_rate") @db.Decimal(10, 2)
  monthlyRate         Decimal?           @map("monthly_rate") @db.Decimal(10, 2)
  projectBased        Boolean            @default(false) @map("project_based")
  negotiable          Boolean            @default(false)
  
  country             String             @default("Nepal")
  province            String
  district            String
  city                String
  serviceRadius       Float?             @map("service_radius")
  latitude            Float?
  longitude           Float?
  
  availabilityType    AvailabilityType   @map("availability_type")
  availableFrom       DateTime?          @map("available_from")
  availableTo         DateTime?          @map("available_to")
  workingHours        Json?              @map("working_hours")
  
  images              Json?
  videos              Json?
  portfolioUrls       Json?              @map("portfolio_urls")
  socialLinks         Json?              @map("social_links")
  certifications      Json?
  documents           Json?
  
  viewCount           Int                @default(0) @map("view_count")
  bookingCount        Int                @default(0) @map("booking_count")
  completionCount     Int                @default(0) @map("completion_count")
  averageRating       Float?             @map("average_rating")
  totalReviews        Int                @default(0) @map("total_reviews")
  
  status              ServiceStatus      @default(PENDING)
  isActive            Boolean            @default(true) @map("is_active")
  isFeatured          Boolean            @default(false) @map("is_featured")
  isVerified          Boolean            @default(false) @map("is_verified")
  verifiedBy          String?            @map("verified_by")
  verifiedAt          DateTime?          @map("verified_at")
  rejectionReason     String?            @map("rejection_reason")
  
  businessYears       Int?               @map("business_years")
  teamSize            Int?               @map("team_size")
  
  createdAt           DateTime           @default(now()) @map("created_at")
  updatedAt           DateTime           @updatedAt @map("updated_at")
  
  provider            IndustrialKYC      @relation(fields: [providerId], references: [userId], onDelete: Cascade)
  category            ServiceCategory    @relation(fields: [categoryId], references: [id])
  subcategory         ServiceSubcategory? @relation(fields: [subcategoryId], references: [id])
  bookings            ServiceBooking[]
  reviews             ServiceReview[]
  reports             ServiceReport[]
  trending             TrendingService?

  @@index([providerId])
  @@index([categoryId])
  @@index([subcategoryId])
  @@index([status])
  @@index([isActive])
  @@index([province, district])
  @@index([latitude, longitude])
  @@index([averageRating])
  @@map("services")
}

model ServiceDemand {
  id                  String              @id @default(uuid())
  seekerId            String              @map("seeker_id")
  categoryId          String              @map("category_id")
  subcategoryId       String?             @map("subcategory_id")
  title               String
  description         String              @db.Text
  detailedDescription String?             @map("detailed_description") @db.Text
  specifications      Json?
  standards           Json?
  demographics        Json?
  geographics         Json?
  
  budgetMin           Decimal?            @map("budget_min") @db.Decimal(10, 2)
  budgetMax           Decimal?            @map("budget_max") @db.Decimal(10, 2)
  paymentType         DemandPaymentType   @map("payment_type")
  budgetNegotiable    Boolean             @default(true) @map("budget_negotiable")
  
  country             String              @default("Nepal")
  province            String
  district            String
  city                String
  preferredRadius     Float?              @map("preferred_radius")
  latitude            Float?
  longitude           Float?
  
  urgency             DemandUrgency
  requiredBy          DateTime?           @map("required_by")
  duration            String?
  
  certificationRequired Boolean           @default(false) @map("certification_required")
  experienceRequired    Int?              @map("experience_required")
  preferredProviders    Json?             @map("preferred_providers")
  
  images              Json?
  documents           Json?
  referenceLinks      Json?              @map("reference_links")
  
  status              DemandStatus       @default(OPEN)
  responseCount       Int                @default(0) @map("response_count")
  viewCount           Int                @default(0) @map("view_count")
  expiresAt           DateTime?          @map("expires_at")
  
  createdAt           DateTime           @default(now()) @map("created_at")
  updatedAt           DateTime           @updatedAt @map("updated_at")
  
  seeker              IndividualKYC      @relation(fields: [seekerId], references: [userId], onDelete: Cascade)
  category            ServiceCategory    @relation(fields: [categoryId], references: [id])
  subcategory         ServiceSubcategory? @relation(fields: [subcategoryId], references: [id])
  responses           ServiceDemandResponse[]

  @@index([seekerId])
  @@index([categoryId])
  @@index([status])
  @@index([urgency])
  @@index([province, district])
  @@index([expiresAt])
  @@map("service_demands")
}

model ServiceDemandResponse {
  id          String        @id @default(uuid())
  demandId    String        @map("demand_id")
  providerId  String        @map("provider_id")
  message     String        @db.Text
  quotedPrice Decimal?      @map("quoted_price") @db.Decimal(10, 2)
  timeline    String?
  status      ResponseStatus @default(PENDING)
  respondedAt DateTime      @default(now()) @map("responded_at")
  
  demand      ServiceDemand @relation(fields: [demandId], references: [id], onDelete: Cascade)
  provider    IndustrialKYC @relation(fields: [providerId], references: [userId], onDelete: Cascade)

  @@unique([demandId, providerId])
  @@index([demandId])
  @@index([providerId])
  @@map("service_demand_responses")
}

model ServiceBooking {
  id              String         @id @default(uuid())
  serviceId       String         @map("service_id")
  customerId      String         @map("customer_id")
  bookingDate     DateTime       @map("booking_date")
  scheduledDate   DateTime       @map("scheduled_date")
  scheduledTime   String?        @map("scheduled_time")
  duration        String?
  
  agreedPrice     Decimal        @map("agreed_price") @db.Decimal(10, 2)
  paymentMethod   String         @map("payment_method")
  paymentStatus   PaymentStatus  @map("payment_status") @default(PENDING)
  paidAmount      Decimal?       @map("paid_amount") @db.Decimal(10, 2)
  paidAt          DateTime?      @map("paid_at")
  
  serviceLocation String         @map("service_location")
  latitude        Float?
  longitude       Float?
  
  status          BookingStatus  @default(PENDING)
  customerNotes   String?        @map("customer_notes") @db.Text
  providerNotes   String?        @map("provider_notes") @db.Text
  
  startedAt       DateTime?      @map("started_at")
  completedAt     DateTime?      @map("completed_at")
  cancelledAt     DateTime?      @map("cancelled_at")
  cancellationReason String?     @map("cancellation_reason") @db.Text
  
  createdAt       DateTime       @default(now()) @map("created_at")
  updatedAt       DateTime       @updatedAt @map("updated_at")
  
  service         Service        @relation(fields: [serviceId], references: [id], onDelete: Cascade)
  customer        IndividualKYC  @relation(fields: [customerId], references: [userId], onDelete: Cascade)
  review          ServiceReview?

  @@index([serviceId])
  @@index([customerId])
  @@index([status])
  @@index([scheduledDate])
  @@map("service_bookings")
}

model ServiceReview {
  id            String         @id @default(uuid())
  bookingId     String         @unique @map("booking_id")
  serviceId     String         @map("service_id")
  customerId    String         @map("customer_id")
  rating        Int
  review        String?        @db.Text
  qualityRating Int?           @map("quality_rating")
  timelinessRating Int?        @map("timeliness_rating")
  communicationRating Int?     @map("communication_rating")
  valueRating   Int?           @map("value_rating")
  images        Json?
  isVerified    Boolean        @default(false) @map("is_verified")
  providerResponse String?     @map("provider_response") @db.Text
  respondedAt   DateTime?      @map("responded_at")
  createdAt     DateTime       @default(now()) @map("created_at")
  updatedAt     DateTime       @updatedAt @map("updated_at")
  
  booking       ServiceBooking @relation(fields: [bookingId], references: [id], onDelete: Cascade)
  service       Service        @relation(fields: [serviceId], references: [id], onDelete: Cascade)
  customer      IndividualKYC  @relation(fields: [customerId], references: [userId], onDelete: Cascade)

  @@index([serviceId])
  @@index([customerId])
  @@index([rating])
  @@map("service_reviews")
}

model ServiceReport {
  id          String       @id @default(uuid())
  serviceId   String       @map("service_id")
  reporterId  String       @map("reporter_id")
  reason      ReportReason
  description String       @db.Text
  evidence    Json?
  status      ReportStatus @default(PENDING)
  adminNotes  String?      @map("admin_notes") @db.Text
  resolvedBy  String?      @map("resolved_by")
  resolvedAt  DateTime?    @map("resolved_at")
  createdAt   DateTime     @default(now()) @map("created_at")
  
  service     Service      @relation(fields: [serviceId], references: [id], onDelete: Cascade)
  reporter    IndividualKYC @relation(fields: [reporterId], references: [userId], onDelete: Cascade)

  @@index([serviceId])
  @@index([reporterId])
  @@index([status])
  @@map("service_reports")
}


model ServiceAnalytics {
  id                  String   @id @default(uuid())
  date                DateTime
  categoryId          String?  @map("category_id")
  
  totalServices       Int      @default(0) @map("total_services")
  activeServices      Int      @default(0) @map("active_services")
  newServices         Int      @default(0) @map("new_services")
  totalDemands        Int      @default(0) @map("total_demands")
  openDemands         Int      @default(0) @map("open_demands")
  newDemands          Int      @default(0) @map("new_demands")
  totalBookings       Int      @default(0) @map("total_bookings")
  completedBookings   Int      @default(0) @map("completed_bookings")
  cancelledBookings   Int      @default(0) @map("cancelled_bookings")
  activeProviders     Int      @default(0) @map("active_providers")
  newProviders        Int      @default(0) @map("new_providers")
  activeCustomers     Int      @default(0) @map("active_customers")
  newCustomers        Int      @default(0) @map("new_customers")
  totalRevenue        Decimal  @default(0) @map("total_revenue") @db.Decimal(15, 2)
  averageBookingValue Decimal? @map("average_booking_value") @db.Decimal(10, 2)
  
  createdAt           DateTime @default(now()) @map("created_at")

  @@unique([date, categoryId])
  @@index([date])
  @@index([categoryId])
  @@map("service_analytics")
}


model TrendingService {
  id            String   @id @default(uuid())
  serviceId     String   @unique @map("service_id")
  categoryId    String   @map("category_id")
  trendScore    Float    @map("trend_score")
  bookingGrowth Float    @map("booking_growth")
  viewGrowth    Float    @map("view_growth")
  rating        Float
  province      String?
  district      String?
  calculatedAt  DateTime @default(now()) @map("calculated_at")

  service       Service  @relation(fields: [serviceId], references: [id], onDelete: Cascade)
  category      ServiceCategory @relation(fields: [categoryId], references: [id])

  @@index([trendScore])
  @@index([categoryId])
  @@index([calculatedAt])
  @@map("trending_services")
}




model JobPosting {
  id               String           @id @default(uuid())
  employerId       String           @map("employer_id")
  title            String
  description      String
  requirements     String
  responsibilities String?
  jobType          JobType          @map("job_type")
  country          String           @default("Nepal")
  province         String
  district         String
  city             String
  isRemote         Boolean          @default(false) @map("is_remote")
  salaryMin        Int?             @map("salary_min")
  salaryMax        Int?             @map("salary_max")
  salaryType       String?          @map("salary_type")
  contractDuration Int?             @map("contract_duration")
  requiredSkills   Json             @map("required_skills")
  experienceYears  Int?             @map("experience_years")
  educationLevel   String?          @map("education_level")
  totalPositions   Int              @default(1) @map("total_positions")
  filledPositions  Int              @default(0) @map("filled_positions")
  isActive         Boolean          @default(true) @map("is_active")
  isVerified       Boolean          @default(false) @map("is_verified")
  verifiedBy       String?          @map("verified_by")
  viewCount        Int              @default(0) @map("view_count")
  expiresAt        DateTime?        @map("expires_at")
  imageUrl         String?          @map("image_url")
  createdAt        DateTime         @default(now()) @map("created_at")
  updatedAt        DateTime         @updatedAt @map("updated_at")
  latitude         Float?           @map("latitude")
  longitude        Float?           @map("longitude")
  applications     JobApplication[]
  employer         IndustrialKYC    @relation(fields: [employerId], references: [userId], onDelete: Cascade)

  @@index([employerId])
  @@index([jobType])
  @@index([province])
  @@index([district])
  @@index([isActive])
  @@map("job_postings")
}

model JobApplication {
  id             String        @id @default(uuid())
  jobId          String        @map("job_id")
  applicantId    String        @map("applicant_id")
  coverLetter    String?       @map("cover_letter")
  resumeUrl      String        @map("resume_url")
  portfolioUrl   String?       @map("portfolio_url")
  status         String        @default("PENDING")
  interviewDate  DateTime?     @map("interview_date")
  interviewNotes String?       @map("interview_notes")
  appliedAt      DateTime      @default(now()) @map("applied_at")
  reviewedAt     DateTime?     @map("reviewed_at")
  applicant      IndividualKYC @relation(fields: [applicantId], references: [userId], onDelete: Cascade)
  job            JobPosting    @relation(fields: [jobId], references: [id], onDelete: Cascade)

  @@unique([jobId, applicantId])
  @@index([applicantId])
  @@index([status])
  @@map("job_applications")
}

model EmploymentHistory {
  id               String           @id @default(uuid())
  userId           String           @map("user_id")
  jobApplicationId String?          @map("job_application_id")
  companyName      String           @map("company_name")
  position         String
  employmentStatus EmploymentStatus @map("employment_status")
  startDate        DateTime         @map("start_date")
  endDate          DateTime?        @map("end_date")
  contractDuration Int?             @map("contract_duration")
  salary           Decimal?         @db.Decimal(10, 2)
  salaryType       String?          @map("salary_type")
  isCurrent        Boolean          @default(true) @map("is_current")
  description      String?
  reasonLeaving    String?          @map("reason_leaving")
  createdAt        DateTime         @default(now()) @map("created_at")
  updatedAt        DateTime         @updatedAt @map("updated_at")
  individual       IndividualKYC    @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([userId])
  @@index([isCurrent])
  @@map("employment_history")
}


model Notification {
  id        String    @id @default(uuid())
  userId    String    @map("user_id")
  type      String
  title     String
  message   String
  data      Json?
  isRead    Boolean   @default(false) @map("is_read")
  readAt    DateTime? @map("read_at")
  createdAt DateTime  @default(now()) @map("created_at")
  user      User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([isRead])
  @@index([createdAt])
  @@index([type])
  @@map("notifications")
}

model Feedback {
  id          String           @id @default(uuid())
  userId      String           @map("user_id")
  type        FeedbackType
  category    FeedbackCategory
  title       String
  description String           @db.Text
  rating      Int? // 1-5 rating (optional)
  status      FeedbackStatus   @default(PENDING) @map("status")
  adminNotes  String?          @map("admin_notes") @db.Text
  respondedAt DateTime?        @map("responded_at")
  respondedBy String?          @map("responded_by")
  createdAt   DateTime         @default(now()) @map("created_at")
  updatedAt   DateTime         @updatedAt @map("updated_at")
  user        User             @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([type])
  @@index([category])
  @@index([status])
  @@index([createdAt])
  @@map("feedback")
}


enum PriceType {
  FIXED
  HOURLY
  DAILY
  MONTHLY
  PROJECT_BASED
  NEGOTIABLE
}
enum AvailabilityType {
  IMMEDIATE
  SCHEDULED
  FLEXIBLE
}

enum ServiceStatus {
  PENDING
  APPROVED
  REJECTED
  SUSPENDED
  INACTIVE
}

enum DemandPaymentType {
  CONTRACTUAL
  HOURLY
  MONTHLY
  THEKKA_PATTA
  PROJECT_BASED
  SUBCONTRACT
}

enum DemandUrgency {
  IMMEDIATE
  WITHIN_WEEK
  WITHIN_MONTH
  FLEXIBLE
}


enum DemandStatus {
  OPEN
  IN_PROGRESS
  FULFILLED
  CANCELLED
  EXPIRED
}


enum ResponseStatus {
  PENDING
  ACCEPTED
  REJECTED
}

enum BookingStatus {
  PENDING
  CONFIRMED
  IN_PROGRESS
  COMPLETED
  CANCELLED
  DISPUTED
}

enum PaymentStatus {
  PENDING
  PARTIAL
  PAID
  REFUNDED
}

enum ReportReason {
  FRAUD
  INAPPROPRIATE
  POOR_QUALITY
  NO_SHOW
  HARASSMENT
  OTHER
}

enum ReportStatus {
  PENDING
  INVESTIGATING
  RESOLVED
  DISMISSED
}

enum KYCStatus {
  PENDING
  APPROVED
  REJECTED
  RESUBMITTED
}

enum EmploymentStatus {
  INTERNSHIP
  PART_TIME
  HOURLY_PAY
  PROBATION
  FULLY_EMPLOYED
  LOOKING_CHANGE
  LOOKING_NEW
  PARTNERSHIP_SEEKING
  PARTNERSHIP_AND_JOB
}

enum TrainingMode {
  PHYSICAL
  ONLINE
  HYBRID
}

enum ExamStatus {
  SCHEDULED
  COMPLETED
  PASSED
  FAILED
  RETOTALING_REQUESTED
  RETOTALING_COMPLETED
}

enum JobType {
  INTERNSHIP
  PART_TIME
  HOURLY_PAY
  DAILY_PAY
  FULL_TIME_1YEAR
  FULL_TIME_2YEAR
  FULL_TIME_2YEAR_PLUS
}

enum EventType {
  WEBINAR
  SEMINAR
  WORKSHOP
  VIRTUAL_CONFERENCE
}

enum UserRole {
  INDIVIDUAL
  INDUSTRIAL
  ADMIN
}

enum UserStatus {
  PENDING_VERIFICATION
  ACTIVE
  SUSPENDED
  DELETED
}

enum UrgentJobCategory {
  HAND_TO_HAND
  CASH_TO_CASH
  LABOR
  OTHER
}

enum UrgentJobStatus {
  OPEN
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

enum UrgencyLevel {
  IMMEDIATE
  TODAY
  WITHIN_HOURS
}

enum PaymentType {
  CASH
  DIGITAL
  BOTH
}

enum ApplicationStatus {
  PENDING
  ACCEPTED
  REJECTED
  COMPLETED
}

enum FeedbackType {
  BUG_REPORT
  FEATURE_REQUEST
  GENERAL_FEEDBACK
  COMPLAINT
  SUGGESTION
}

enum FeedbackCategory {
  UI_UX
  FUNCTIONALITY
  PERFORMANCE
  SECURITY
  CONTENT
  OTHER
}

enum FeedbackStatus {
  PENDING
  REVIEWED
  IN_PROGRESS
  RESOLVED
  REJECTED
}
